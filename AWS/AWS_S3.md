# S3(Simple Storage Service) : 대표적인 이미지 서버, 웹 호스팅 서버

### S3에는 DB설치 불가능

# S3 기본개념

```
1. 객체(Object)S3에 데이터가 저장되는 기본 단위로써 파일과 메타데이터로 이루어져있다. 객체 하나의 크기는 1Byte부터 5TB까지 허용되며 메타데이터는 MIME 형식으로 파일 확장자를 통해 자동으로 설정되며 사용자 임의로도 지정 가능하다.

2. 버킷(Bucket)S3에서 생성할 수 있는 최상위 디렉토리의 개념으로 이름은 S3 리전 중에서 유일해야 한다. 계정별로 100개까지 생성 가능하며 버킷에 저장할 수 있는 객체수와 용량은 무제한이다.

3. 표준스토리지S3 서비스 수준 계약으로 객체에 대해 99.999999999%의 내구성을 보장하며 99.99%의 가용성을 제공한다. 하지만 높은 내구성을 보장해야 하는 만큼 비용이 높으므로 유실되면 안되는 원본 데이터, 민감정보, 개인정보 등의 중요한 데이터를 저장하는 것이 알맞다.

4. RRS(Reduced Redundancy Storage)표준 스토리지보다 저렴한 비용으로 데이터를 저장할 수 있다. RRS 옵션은 여러 시설 전반에 다양한 디바이스에 객체를 저장하며 일반 디스크 드라이브의 400배에 달하는 내구성을 제공하나 표준 스토리지 만큼 많이 객체를 복제하지는 않으므로 원본을 복제한 데이터나 가공한 데이터(예를 들어 썸네일 같은)의 저장에 알맞다
```

```
사용 여부 : 1. 이미지, 영상 전용 서버로 많이 사용 2. 백업 서버로 많이 사용 3. 웹 호스팅 서버로 사용 => 정적 웹만 호스팅 가능
(호스팅 : 빌린다 라는 뜻)
3-1) 의미 : S3를 임대해서 내HTML을 S3에 업로드 하겠다.

특징 : 1. 저장공간 무한
가격 : 1. 시간당 저장 용량만큼 가격을 측정 2. 5GB 이하는 1년간 공짜(5GB 이상이면 금액 지불)
디폴트 : 1. S3는 디폴트로 이미지,동영상,pdf 등을 업로드 하는 공간이기 때문에 \*속성에 들어가
정적 웹 사이트 호스팅에 들어가 정적 웹 호스팅을 활성화 시켜주어야한다.

    2. 모든 사람들이 볼 수 있게 *권한에 들어가서 퍼블릭으로 설정해주어야한다.
        방법 : 퍼블릭 액세스 차단(버킷 설정) -> 편집을 클릭해 차단을 풀어주고 활성화를 시킨뒤 확인을 입력해주면 된다.

```

## 정적 웹 & 동적 웹

```

- 정적 웹 : HTML,JS,JQuery

- 동적 웹 : (웹 프레임워크 + 템플릿엔진)
  Spring boot + JSP

정적 웹과 동적 웹의 차이점 : 1. DB를 연동할 수 있는지 여부(동적 웹 : 연동O , 정적 웹 : 연동X)

```

## 버킷 만들기 순서

```

1. 버킷 : 버킷페이지 -> 버킷만들기 클릭 -> 버킷 이름 설정(ex) geunhwan.io) -> 아래로 스크롤 버킷만들기 클릭
2. 속성 : 버킷 들어가 속성 클릭-> 아래로 스크롤 정적 웹 사이트 호스팅 편집 클릭 -> 활성화 -> 인덱스 문서
   -> 기본으로 설정할 페이지 html파일 이름 설정(html파일 이름과 동일하는게 좋다.) -> 변경 사항 저장 클릭
3. 권한 :
   3-1) 퍼블릭 액세스 차단(버킷 설정) 편집 클릭 -> '모든 퍼블릭 액세스 차단' checked 해제 -> 변경사항 저장 클릭
   3-2) 버킷정책 편집 클릭 -> 버킷 ARN 복사 -> 정책 생성기 클릭 ->
   'Select Type of Policy' : S3 Bucket Policy 선택 -> Principal : _ 입력 -> Actions : GetObject 선택 ->
   Amazon Resource Name (ARN)에 버킷 ARN 붙여넣기 + /_ 입력 -> Add Statement 클릭 -> Generate Policy 클릭 ->
   복사 후 S3 버킷정책 편집 페이지에 붙여넣기 -> 변경 사항 저장 클릭

```

<img src="./image/버킷 정책 편집.PNG" width= 800px; alt="" />
<img src="./image/정책 생성기.PNG" width= 800px; alt="" />

# AWS S3 과정

## 1. 버킷만들기 클릭

![01](/AWS/img/01.JPG)

## 2. 버킷 이름 = 내가 할 도메인 주소 입력

![02](/AWS/img/02.JPG)
ex) stopu.com / .io / .pro / .net ...

## 3. 이름(stopu.io) 클릭

![03](/AWS/img/03.JPG)

## 4. 속성 -> 스크롤 마지막 정적 웹 사이트 호스팅

![09](/AWS/img/09.JPG)
![11](/AWS/img/11.PNG)

## 5. 인덱스 문서 항목에 내가 올릴 html파일의 이름과 동일하게 작성

![12](/AWS/img/12.PNG)

## 6. 권한 -> 퍼블릭 엑세스 차단(버킷 설정) 클릭

![04](/AWS/img/04.JPG)

## 7. 체크박스 전체 해제

![05](/AWS/img/05.JPG)
![06](/AWS/img/06.JPG)

## 8. 버킷 정책에서 편집 클릭

![07](/AWS/img/07.JPG)

## 9. 밑에 버킷정책 복사 후 도메인주소에 2번에서 만든 도메인 입력

![08](/AWS/img/08.JPG)

- 버킷정책

```

{
"Version": "2012-10-17",
"Statement": [
{
"Effect": "Allow",
"Principal": "*",
"Action": "s3:*",
"Resource": "arn:aws:s3:::도메인주소/*"
}
]
}

```

## 10. 속성 클릭

![09](/AWS/img/09.JPG)

## 11. 스크롤 끝에 주소 생성 됨

![10](/AWS/img/10.JPG)

---

```

```
